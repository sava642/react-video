{"ast":null,"code":"import _regeneratorRuntime from\"/Users/savostiny/Desktop/React.projects/React.goit-module5.task1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/savostiny/Desktop/React.projects/React.goit-module5.task1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/savostiny/Desktop/React.projects/React.goit-module5.task1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{Input,Button}from\"./Movies.styled\";import{fetchSearchMovies}from'../../api';import{ToastContainer,toast}from\"react-toastify\";import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Movies(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),foundMovies=_useState4[0],setFoundMovies=_useState4[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var form=event.currentTarget;var value=form.elements.searchValue.value;if(value===\"\"){setQuery(value);toast('Впишите значение поиска');return;}setQuery(value);form.reset();};useEffect(function(){if(query===\"\"){return;}function fetchSearch(){return _fetchSearch.apply(this,arguments);}function _fetchSearch(){_fetchSearch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,data,_foundMovies;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='search/movie';_context.prev=1;_context.next=4;return fetchSearchMovies(url,query);case 4:data=_context.sent;_foundMovies=data.results.map(function(_ref){var id=_ref.id,title=_ref.title;return{id:id,title:title};});if(_foundMovies){setFoundMovies(_foundMovies);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);toast(_context.t0.massage);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _fetchSearch.apply(this,arguments);}fetchSearch();},[query]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"searchValue\",placeholder:\"Search video\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{children:foundMovies.map(function(_ref2){var id=_ref2.id,title=_ref2.title;return/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(Link,{to:\"/movies/\".concat(id),children:/*#__PURE__*/_jsx(\"li\",{children:title})})},id);})})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","Input","Button","fetchSearchMovies","ToastContainer","toast","Movies","query","setQuery","foundMovies","setFoundMovies","handleSubmit","event","preventDefault","form","currentTarget","value","elements","searchValue","reset","fetchSearch","url","data","results","map","id","title","massage"],"sources":["/Users/savostiny/Desktop/React.projects/React.goit-module5.task1/src/components/Movies/Movies.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Input, Button } from \"./Movies.styled\";\nimport { fetchSearchMovies } from '../../api'\n\nimport { ToastContainer, toast } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function Movies() {\n\tconst [query, setQuery] = useState('');\n\tconst [foundMovies, setFoundMovies] = useState([])\n\n\tconst handleSubmit = event => {\n\t\tevent.preventDefault();\n\t\tconst form = event.currentTarget;\n\t\tconst value = form.elements.searchValue.value;\n\t\tif (value === \"\") {\n\t\t\tsetQuery(value)\n\t\t\ttoast('Впишите значение поиска')\n\t\t\treturn;\n\t\t}\n\t\tsetQuery(value);\n\t\tform.reset();\n\t}\n\tuseEffect(() => {\n\t\tif (query === \"\") {\n\t\t\treturn;\n\t\t}\n\t\tasync function fetchSearch() {\n\t\t\tconst url = 'search/movie'\n\t\t\ttry {\n\t\t\t\tconst data = await fetchSearchMovies(url, query);\n\t\t\t\tconst foundMovies = data.results.map(({ id, title\n\t\t\t\t}) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\tif (foundMovies) {\n\t\t\t\t\tsetFoundMovies(foundMovies);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\ttoast(error.massage)\n\t\t\t}\n\t\t}\n\t\tfetchSearch()\n\t}, [query])\n\n\treturn (\n\t\t<>\n\t\t\t<ToastContainer />\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<Input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"searchValue\"\n\t\t\t\t\tplaceholder=\"Search video\"\n\t\t\t\t/>\n\t\t\t\t<Button type=\"submit\" >\n\t\t\t\t\tSearch\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t\t<div>\n\t\t\t\t{foundMovies.map(({ id, title }) => (<ul key={id}>\n\t\t\t\t\t<Link to={`/movies/${id}`}>\n\t\t\t\t\t\t<li>{title}</li>\n\t\t\t\t\t</Link>\n\t\t\t\t</ul>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</>\n\t)\n}\n"],"mappings":"kdAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,iBAA9B,CACA,OAASC,iBAAT,KAAkC,WAAlC,CAEA,OAASC,cAAT,CAAyBC,KAAzB,KAAsC,gBAAtC,CACA,MAAO,uCAAP,C,6IAEA,cAAe,SAASC,OAAT,EAAkB,CAChC,cAA0BR,QAAQ,CAAC,EAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eACA,eAAsCV,QAAQ,CAAC,EAAD,CAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAAAC,KAAK,CAAI,CAC7BA,KAAK,CAACC,cAAN,GACA,GAAMC,KAAI,CAAGF,KAAK,CAACG,aAAnB,CACA,GAAMC,MAAK,CAAGF,IAAI,CAACG,QAAL,CAAcC,WAAd,CAA0BF,KAAxC,CACA,GAAIA,KAAK,GAAK,EAAd,CAAkB,CACjBR,QAAQ,CAACQ,KAAD,CAAR,CACAX,KAAK,CAAC,yBAAD,CAAL,CACA,OACA,CACDG,QAAQ,CAACQ,KAAD,CAAR,CACAF,IAAI,CAACK,KAAL,GACA,CAXD,CAYApB,SAAS,CAAC,UAAM,CACf,GAAIQ,KAAK,GAAK,EAAd,CAAkB,CACjB,OACA,CAHc,QAIAa,YAJA,6IAIf,+JACOC,GADP,CACa,cADb,uCAGqBlB,kBAAiB,CAACkB,GAAD,CAAMd,KAAN,CAHtC,QAGQe,IAHR,eAIQb,YAJR,CAIsBa,IAAI,CAACC,OAAL,CAAaC,GAAb,CAAiB,cAC/B,IADkCC,GAClC,MADkCA,EAClC,CADsCC,KACtC,MADsCA,KACtC,CACL,MAAO,CACND,EAAE,CAAFA,EADM,CAENC,KAAK,CAALA,KAFM,CAAP,CAIA,CANmB,CAJtB,CAYE,GAAIjB,YAAJ,CAAiB,CAChBC,cAAc,CAACD,YAAD,CAAd,CACA,CAdH,+EAgBEJ,KAAK,CAAC,YAAMsB,OAAP,CAAL,CAhBF,oEAJe,8CAuBfP,WAAW,GACX,CAxBQ,CAwBN,CAACb,KAAD,CAxBM,CAAT,CA0BA,mBACC,wCACC,KAAC,cAAD,IADD,cAEC,cAAM,QAAQ,CAAEI,YAAhB,wBACC,KAAC,KAAD,EACC,IAAI,CAAC,MADN,CAEC,IAAI,CAAC,aAFN,CAGC,WAAW,CAAC,cAHb,EADD,cAMC,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,oBAND,GAFD,cAYC,qBACEF,WAAW,CAACe,GAAZ,CAAgB,mBAAGC,GAAH,OAAGA,EAAH,CAAOC,KAAP,OAAOA,KAAP,oBAAoB,iCACpC,KAAC,IAAD,EAAM,EAAE,mBAAaD,EAAb,CAAR,uBACC,oBAAKC,KAAL,EADD,EADoC,EAASD,EAAT,CAApB,EAAhB,CADF,EAZD,GADD,CAuBA"},"metadata":{},"sourceType":"module"}